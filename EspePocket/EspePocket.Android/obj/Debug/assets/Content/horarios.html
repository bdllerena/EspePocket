<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Horarios - EspePocket</title>
  </head>
  
  <body>
    <header>
      <center><h1>Crea tu horario</h1></center>
    </header>
    
    <div id="vioForm">
      <form id="myForm">
		<div style="width:800px;">
		<div class="right">
		<table>
				<tr>
					<td class="blank"></td>
					<td class="title">Lunes</td>
					<td class="title">Martes</td>
					<td class="title">Mi√©rcoles</td>
					<td class="title">Jueves</td>
					<td class="title">Viernes</td>
					<td class="title">Sabado</td>
				</tr>
				<tr>
					<td class="time">07:15</td>
					<td><div id="a1"><input   name="q1" type="text" /></div></td>
					<td><div id="a2"><input   name="q2" type="text" /></div></td>
					<td><div id="a3"><input   name="q3" type="text" /></div></td>
					<td><div id="a4"><input   name="q4" type="text" /></div></td>
					<td><div id="a5"><input   name="q5" type="text" /></div></td>
					<td><div id="a6"><input   name="q6" type="text" /></div></td>
				</tr>
				<tr>
					<td class="time">08:15</td>
					<td><div id="b1"><input   name="w1" type="text" /></div></td>
					<td><div id="b2"><input   name="w2" type="text" /></div></td>
					<td><div id="b3"><input   name="w3" type="text" /></div></td>
					<td><div id="b4"><input   name="w4" type="text" /></div></td>
					<td><div id="b5"><input   name="w5" type="text" /></div></td>
					<td><div id="b6"><input   name="w6" type="text" /></div></td>
				</tr>
				<tr>
					<td class="time">09:15</td>
					<td class="lunch" colspan="5">Receso</td>
				</tr>
				<tr>
					<td class="time">09:30</td>
					<td><div id="c1"><input   name="e1" type="text" /></div></td>
					<td><div id="c2"><input   name="e2" type="text" /></div></td>
					<td><div id="c3"><input   name="e3" type="text" /></div></td>
					<td><div id="c4"><input   name="e4" type="text" /></div></td>
					<td><div id="c5"><input   name="e5" type="text" /></div></td>
					<td><div id="c6"><input   name="e6" type="text" /></div></td>
				</tr>
				<tr>
					<td class="time">10:30</td>
					<td><div id="d1"><input   name="r1" type="text" /></div></td>
					<td><div id="d2"><input   name="r2" type="text" /></div></td>
					<td><div id="d3"><input   name="r3" type="text" /></div></td>
					<td><div id="d4"><input   name="r4" type="text" /></div></td>
					<td><div id="d5"><input   name="r5" type="text" /></div></td>
					<td><div id="d6"><input   name="r6" type="text" /></div></td>
				</tr>
				<tr>
					<td class="time">11:30</td>
					<td class="lunch" colspan="5">Receso</td>
				</tr>
				<tr>
					<td class="time">12:00</td>
					<td><div id="e1"><input   name="t1" type="text" /></div></td>
					<td><div id="e2"><input   name="t2" type="text" /></div></td>
					<td><div id="e3"><input   name="t3" type="text" /></div></td>
					<td><div id="e4"><input   name="t4" type="text" /></div></td>
					<td><div id="e5"><input   name="t5" type="text" /></div></td>
					<td><div id="e6"><input   name="t6" type="text" /></div></td>
				</tr>
				<tr>
					<td class="time">13:00</td>
					<td><div id="f1"><input   name="y1" type="text"/></div></td>
					<td><div id="f2"><input   name="y2" type="text"/></div></td>
					<td><div id="f3"><input   name="y3" type="text"/></div></td>
					<td><div id="f4"><input   name="y4" type="text"/></div></td>
					<td><div id="f5"><input   name="y5" type="text"/></div></td>
					<td><div id="f6"><input   name="y6" type="text"/></div></td>
				</tr>
				<tr>
					<td class="time">14:00</td>
					<td><div id="f1"><input   name="y1" type="text" /></div></td>
					<td><div id="f2"><input   name="y2" type="text" /></div></td>
					<td><div id="f3"><input   name="y3" type="text" /></div></td>
					<td><div id="f4"><input   name="y4" type="text" /></div></td>
					<td><div id="f5"><input   name="y5" type="text" /></div></td>
					<td><div id="f6"><input   name="y6" type="text" /></div></td>
				</tr>
				<tr>
					<td class="time">15:00</td>
					<td><div id="g1"><input   name="u1" type="text" /></div></td>
					<td><div id="g2"><input   name="u2" type="text" /></div></td>
					<td><div id="g3"><input   name="u3" type="text" /></div></td>
					<td><div id="g4"><input   name="u4" type="text" /></div></td>
					<td><div id="g5"><input   name="u5" type="text" /></div></td>
					<td><div id="g6"><input   name="u6" type="text" /></div></td>
				</tr>
				<tr>
					<td class="time">16:00</td>
					<td><div id="h1"><input   name="i1" type="text" /></div></td>
					<td><div id="h2"><input   name="i2" type="text" /></div></td>
					<td><div id="h3"><input   name="i3" type="text" /></div></td>
					<td><div id="h4"><input   name="i4" type="text" /></div></td>
					<td><div id="h5"><input   name="i5" type="text" /></div></td>
					<td><div id="h6"><input   name="i6" type="text" /></div></td>
				</tr>
				<tr>
					<td class="time">17:15</td>
					<td class="lunch" colspan="5">Receso</td>
				</tr>
				<tr>
					<td class="time">17:30</td>
					<td><div id="i1"><input   name="o1" type="text" /></div></td>
					<td><div id="i2"><input   name="o2" type="text" /></div></td>
					<td><div id="i3"><input   name="o3" type="text" /></div></td>
					<td><div id="i4"><input   name="o4" type="text" /></div></td>
					<td><div id="i5"><input   name="o5" type="text" /></div></td>
					<td><div id="i6"><input   name="o6" type="text" /></div></td>
				</tr>
				<tr>
					<td class="time">18:30</td>
					<td><div id="j1"><input   name="p1" type="text" /></div></td>
					<td><div id="j2"><input   name="p2" type="text" /></div></td>
					<td><div id="j3"><input   name="p3" type="text" /></div></td>
					<td><div id="j4"><input   name="p4" type="text" /></div></td>
					<td><div id="j5"><input   name="p5" type="text" /></div></td>
					<td><div id="j6"><input   name="p6" type="text" /></div></td>
				</tr>
				<tr>
					<td class="time">19:15</td>
					<td class="lunch" colspan="5">Receso</td>
				</tr>
				<tr>
					<td class="time">19:30</td>
					<td><div id="i1"><input   name="a1" type="text" /></div></td>
					<td><div id="k2"><input   name="a2" type="text" /></div></td>
					<td><div id="k3"><input   name="a3" type="text" /></div></td>
					<td><div id="k4"><input   name="a4" type="text" /></div></td>
					<td><div id="k5"><input   name="a5" type="text" /></div></td>
					<td><div id="k6"><input   name="a6" type="text" /></div></td>
				</tr>
				<tr>
					<td class="time">21:30</td>
					<td><div id="l1"><input   name="s1" type="text" /></div></td>
					<td><div id="l2"><input   name="s2" type="text" /></div></td>
					<td><div id="l3"><input   name="s3" type="text" /></div></td>
					<td><div id="l4"><input   name="s4" type="text" /></div></td>
					<td><div id="l5"><input   name="s5" type="text" /></div></td>
					<td><div id="l6"><input   name="s6" type="text" /></div></td>
				</tr>
			</table>
				</div>
	</div>
		<center><input type="button" class="button" id="saveButton" value="GUARDAR" /></center>
        <div hidden><input type="button" id="closeButton" value="CERRAR" /></div>
      </form>
	      
    </div>
    <ul id="list"></ul> 
      
    <script type="text/javascript">
      function supports_html5_storage() {
        try {
          return 'localStorage' in window && window['localStorage'] !== null;
        } catch (e) {
          return false;
        }
      }    
    
      function saveData() {
        try {
          localStorage["a1"] = f.q1.value;
		  localStorage["a2"] = f.q2.value;
		  localStorage["a3"] = f.q3.value;
		  localStorage["a4"] = f.q4.value;
		  localStorage["a5"] = f.q5.value;
		  localStorage["a6"] = f.q6.value;
		  localStorage["b1"] = f.w1.value;
		  localStorage["b2"] = f.w2.value;
		  localStorage["b3"] = f.w3.value;
		  localStorage["b4"] = f.w4.value;
		  localStorage["b5"] = f.w5.value;
		  localStorage["b6"] = f.w6.value;
		  localStorage["c1"] = f.e1.value;
		  localStorage["c2"] = f.e2.value;
		  localStorage["c3"] = f.e3.value;
		  localStorage["c4"] = f.e4.value;
		  localStorage["c5"] = f.e5.value;
		  localStorage["c6"] = f.e6.value;
		  localStorage["d1"] = f.r1.value;
		  localStorage["d2"] = f.r2.value;
		  localStorage["d3"] = f.r3.value;
		  localStorage["d4"] = f.r4.value;
		  localStorage["d5"] = f.r5.value;
		  localStorage["d6"] = f.r6.value;
		  localStorage["e1"] = f.t1.value;
		  localStorage["e2"] = f.t2.value;
		  localStorage["e3"] = f.t3.value;
		  localStorage["e4"] = f.t4.value;
		  localStorage["e5"] = f.t5.value;
		  localStorage["e6"] = f.t6.value;
		  localStorage["f1"] = f.y1.value;
		  localStorage["f2"] = f.y2.value;
		  localStorage["f3"] = f.y3.value;
		  localStorage["f4"] = f.y4.value;
		  localStorage["f5"] = f.y5.value;
		  localStorage["f6"] = f.y6.value;
		  localStorage["g1"] = f.u1.value;
		  localStorage["g2"] = f.u2.value;
		  localStorage["g3"] = f.u3.value;
		  localStorage["g4"] = f.u4.value;
		  localStorage["g5"] = f.u5.value;
		  localStorage["g6"] = f.u6.value;
		  localStorage["h1"] = f.i1.value;
		  localStorage["h2"] = f.i2.value;
		  localStorage["h3"] = f.i3.value;
		  localStorage["h4"] = f.i4.value;
		  localStorage["h5"] = f.i5.value;
		  localStorage["h6"] = f.i6.value;
		  localStorage["i1"] = f.o1.value;
		  localStorage["i2"] = f.o2.value;
		  localStorage["i3"] = f.o3.value;
		  localStorage["i4"] = f.o4.value;
		  localStorage["i5"] = f.o5.value;
		  localStorage["i6"] = f.o6.value;
		  localStorage["j1"] = f.p1.value;
		  localStorage["j2"] = f.p2.value;
		  localStorage["j3"] = f.p3.value;
		  localStorage["j4"] = f.p4.value;
		  localStorage["j5"] = f.p5.value;
		  localStorage["j6"] = f.p6.value;
		  localStorage["k1"] = f.a1.value;
		  localStorage["k2"] = f.a2.value;
		  localStorage["k3"] = f.a3.value;
		  localStorage["k4"] = f.a4.value;
		  localStorage["k5"] = f.a5.value;
		  localStorage["k6"] = f.a6.value;
		  localStorage["l1"] = f.s1.value;
		  localStorage["l2"] = f.s2.value;
		  localStorage["l3"] = f.s3.value;
		  localStorage["l4"] = f.s4.value;
		  localStorage["l5"] = f.s5.value;
		  localStorage["l6"] = f.s6.value;

        } catch (e) {
          alert("No se pudo guardar");
        }
      }     
      function loadUserData() {
        for (i=0; i<formDivs.length; i++){
          key = formDivs[i].id;
          value = localStorage[key];
          input = formDivs[i].getElementsByTagName('input')[0];
          if (typeof input === ' '){
            f.combo.selectedIndex = value;
          } else {
            input.value = value;
          }
        }                                       
      }
      
      var list = document.getElementById("list")
      var f = document.getElementById("myForm");
      var formDivs = f.getElementsByTagName("div");
      
      f.saveButton.onclick = function(){
        if (supports_html5_storage) {
          saveData(); 
          displayUserData();
        } else {
          alert("Este navegador no soporta esto");
        }
      }
      
      f.closeButton.onclick = function(){window.close()}
      
      window.onload = function(){
        console.log("here");
        if (supports_html5_storage) {
          loadUserData();
        }
      }
    </script>
	<style type="text/css">
		
		.right{
			float:right;
			width:570px;
		}
		.right table{
			background:#def4b7;
			width:100%;
		}
		.right td{
			background:#fafafa;
			color:#444;
			text-align:center;
			padding:5px;
		}
		.right td{
			background:#def4b7;
		}
		.right td.drop{
			background:#fafafa;
			width:100px;
		}
		.right td.over{
			background:#FBEC88;
		}
		.item{
			text-align:center;
			border:1px solid #499B33;
			background:#fafafa;
			color:#444;
			width:100px;
		}
		.assigned{
			border:1px solid #BC2A4D;
		}
		.button {
		background-color: #4CAF50;
		border: none;
		color: white;
		padding: 15px 32px;
		text-align: center;
		text-decoration: none;
		display: inline-block;
		font-size: 16px;
		margin: 4px 2px;
		cursor: pointer;
		}
		
	</style>
  </body>
</html>